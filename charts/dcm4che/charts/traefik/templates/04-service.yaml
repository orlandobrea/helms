{{- if .Values.enabled }}
---
apiVersion: v1
kind: Service
metadata:
  name: {{ include "traefik.fullname" . }}
spec:
  type: LoadBalancer
  selector:
    app: {{ include "traefik.fullname" . }}
  ports:
    - protocol: TCP
      port: 80
      name: web
      targetPort: 80
      nodePort: {{ .Values.global.ingress.ports.http }}
    - protocol: TCP
      port: 443
      name: websecure
      targetPort: 443
      nodePort: {{ .Values.global.ingress.ports.https }}      
    - protocol: TCP
      port: 8100
      name: traefik-admin
      targetPort: 8100
      nodePort: {{ .Values.global.ingress.ports.dashboard }}      
    # - protocol: TCP
    #   port: 8080
    #   name: admin
    #   targetPort: 8080
    #   nodePort: 30900
    # - protocol: TCP
    #   port: 8000
    #   name: tcpep
    #   targetPort: 8000

---
apiVersion: v1
kind: Service
metadata:
  name: {{ include "traefik.fullname" . }}udp
spec:
  type: LoadBalancer
  selector:
    app: {{ include "traefik.fullname" . }}
  ports:
    - protocol: UDP
      port: 9000
      name: udpep
      targetPort: 9000


---
apiVersion: v1
kind: Service
metadata:
  name: {{ include "traefik.fullname" . }}hl7
spec:
  type: LoadBalancer
  selector:
    app: {{ include "traefik.fullname" . }}
  ports:
    - protocol: TCP
      name: hl7
      port: 2575
      targetPort: 2575
      nodePort: {{ .Values.global.ingress.ports.hl7 }}


---
apiVersion: v1
kind: Service
metadata:
  name: {{ include "traefik.fullname" . }}hl7-udp
spec:
  type: LoadBalancer
  selector:
    app: {{ include "traefik.fullname" . }}
  ports:      
    - protocol: UDP
      name: hl7-udp
      port: 2575
      targetPort: 2575
      nodePort: {{ .Values.global.ingress.ports.hl7udp }}   

---
apiVersion: v1
kind: Service
metadata:
  name: {{ include "traefik.fullname" . }}dicom
spec:
  type: LoadBalancer
  selector:
    app: {{ include "traefik.fullname" . }}
  ports:      
    - protocol: TCP      
      name: dicom
      port: 2762
      targetPort: 2762
      nodePort: {{ .Values.global.ingress.ports.dicom }}

{{- end-}}